(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,n,t){},179:function(e,n,t){},180:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(32),c=t.n(l),o=(t(92),t(9)),i=t(10),s=t(13),u=t(11),m=t(14),h=t(12),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)({type:"CHANNELS_UPDATE",channels:e})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)({type:"MY_CHANNELS_UPDATE",channels:e})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)({type:"CONVERSATIONS_UPDATE",channels:e})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)({type:"USERS_UPDATE",users:e})},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)({type:"PROFILE_UPDATE",profile:e})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)({type:"UPDATE_CHANNEL",channel:e})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)({type:"UPDATE_CHAT",chat:e})},y=(t(97),function(e){function n(){return Object(o.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("img",{alt:"Planet",src:"/img/Proposal of graphic identidy planet-09.png",className:"logo"})),r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"/",className:"link"},"Community"),r.a.createElement("a",{href:"/",className:"link"},"Exchange"),r.a.createElement("a",{href:"/",className:"link"},"User")))}}]),n}(a.Component)),N=function(e){var n=e.onClick;return r.a.createElement("div",{className:"newGroup",onClick:n},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"circle"},r.a.createElement("span",null,"+")),r.a.createElement("span",null,"New Channel")))},k=(t(98),t(99),t(86)),b=function(e){var n=e.functionName,t=e.params,a=void 0===t?{}:t,r=e.callback,l=void 0===r?function(e){}:r;Object(k.connect)().then(function(e){var t=e.callZome,r=e.close;t("test-instance","messaging",n)(a).then(function(e){console.log("HC CALL: ".concat(n,", received "),e),l(JSON.parse(e)),r()})})},O=function(e){var n=e.name,t=(e.title,e.onClick);return r.a.createElement("div",{className:"user",onClick:t},r.a.createElement("div",{className:"circle"},n&&n[0].toUpperCase()),r.a.createElement("span",{className:"text"},n))},_=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(s.a)(this,Object(u.a)(n).call(this,e))).updateMyChannels=function(){b({functionName:"get_my_channels",callback:function(e){t.props.loadMyChannels(e.Ok)}})},t.updateChannels=function(){b({functionName:"get_all_channels",callback:function(e){t.props.loadChannels(e.Ok)}})},t.updateConversations=function(){b({functionName:"get_my_conversations",callback:function(e){t.props.loadConversations(e.Ok)}})},t.updateUsers=function(){b({functionName:"get_all_users",callback:function(e){t.props.loadUsers(e.Ok)}})},t.updateAll=function(){t.updateMyChannels()},t.clickUser=function(e){},t.clickChannel=function(e){t.props.loadCurrentChannel(e),t.props.loadCurrentChat([]),b({functionName:"get_messages_from_channel",params:{channel:e.address},callback:function(e){t.props.loadCurrentChat(e.Ok)}})},t.createChannel=function(){var e=prompt("insert the name of the channel");e&&b({functionName:"create_channel",params:{entry:{title:e,description:"default description"}},callback:function(e){console.log(e),setTimeout(function(){t.updateMyChannels()},300),t.updateMyChannels()}})},t.updateAll(),t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sidebar"},r.a.createElement(N,{onClick:this.createChannel}),r.a.createElement("button",{className:"reloader",onClick:this.updateAll},r.a.createElement("span",{role:"img","aria-label":""},"\ud83d\udd04")," Update"),r.a.createElement("div",{className:"chats"},r.a.createElement("div",{className:"divider"},"My Channels"),this.props.myChannels&&this.props.myChannels.length>0&&this.props.myChannels.map(function(n,t){return r.a.createElement(O,{key:t,name:n.entry.title,onClick:function(t){return e.clickChannel(n)}})}),r.a.createElement("div",{className:"join"},"Join a channel!"),r.a.createElement("div",{className:"divider"},"Conversations"),this.props.conversations&&this.props.conversations.length>0&&this.props.conversations.map(function(n,t){return r.a.createElement(O,{key:t,name:n.entry.username,onClick:e.clickUser})}),r.a.createElement("div",{className:"join"},"Start a conversation!")))}}]),n}(a.Component),j=Object(h.b)(function(e){return{conversations:e.conversations,myChannels:e.myChannels}},function(e){return{loadMyChannels:function(n){return p(n,e)},loadChannels:function(n){return d(n,e)},loadConversations:function(n){return f(n,e)},loadUsers:function(n){return v(n,e)},loadCurrentChannel:function(n){return E(n,e)},loadCurrentChat:function(n){return C(n,e)}}})(_),A=(t(178),t(179),function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(l)))).inputRef=r.a.createRef(),t.sendMessage=function(e){var n=t.inputRef.current.value;n&&(t.inputRef.current.value="",b({functionName:"send_message",params:{entry:{content:n},channel_address:t.props.currentChannel.address},callback:function(){setTimeout(function(){b({functionName:"get_messages_from_channel",params:{channel:t.props.currentChannel.address},callback:function(e){t.props.loadCurrentChat(e.Ok)}})},300)}}))},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this,n=this.props.currentChannel,t=this.props.chat;return console.log("msjs",t),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"descriptor"},r.a.createElement("h4",null,n?n.entry.title:r.a.createElement(r.a.Fragment,null,"Select a chat")),r.a.createElement("small",null,n?n.entry.description:r.a.createElement(r.a.Fragment,null,"Join the Planet!"))),r.a.createElement("div",{className:"messages"},t&&t.length>0&&t.map(function(n,t){return r.a.createElement("div",{key:t,className:n.entry.author===e.props.me.address&&"me"},n.entry.content)})),r.a.createElement("div",{className:"message-input"},r.a.createElement("input",{ref:this.inputRef,onKeyDown:function(n){return 13===n.keyCode?e.sendMessage():null},placeholder:"Write something!",disabled:!n||""}),r.a.createElement("button",{disabled:!n||"",onClick:this.sendMessage},"Send",r.a.createElement("span",{role:"img","aria-label":""},"\u27a1\ufe0f"))))}}]),n}(r.a.Component)),U=Object(h.b)(function(e){return{chat:e.chat,currentChannel:e.currentChannel,me:e.me}},function(e){return{loadCurrentChat:function(n){return C(n,e)}}})(A),S=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(s.a)(this,Object(u.a)(n).call(this,e))).state={logged:!1,username:null},t.handleUsernameChange=function(e){t.setState({username:e.target.value}),13===e.keyCode&&t.join(e.target.value)},t.join=function(e){b({functionName:"create_user",params:{username:e},callback:function(e){e.Ok?t.setState({logged:!0}):(alert("error"),console.log(e))}})},b({functionName:"check_register",callback:function(e){if(e&&e.Ok&&e.Ok.registered){var n=JSON.parse(e.Ok.me.App[1]);t.props.updateProfile(n),t.setState({logged:!0})}}}),t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this;return this.state.logged?r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement("main",null,r.a.createElement(j,null),r.a.createElement(U,null))):r.a.createElement("div",{className:"register-section"},r.a.createElement("h3",null,"Welcome to Planet Chat!"),r.a.createElement("input",{onKeyDown:this.handleUsernameChange,placeholder:"Insert your username"}),r.a.createElement("button",{onClick:function(n){return e.join(e.state.username)}},"Join"))}}]),n}(r.a.Component),T=Object(h.b)(function(){return{}},function(e){return{updateProfile:function(n){return g(n,e)}}})(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=t(19);var w=Object(P.b)({currentChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return"UPDATE_CHANNEL"!==n.type?e:n.channel},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return"CONVERSATIONS_UPDATE"!==n.type?e:n.users},myChannels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return"MY_CHANNELS_UPDATE"!==n.type?e:n.channels},channels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return console.log(n.type,n),"CHANNELS_UPDATE"!==n.type?e:n.channels},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return"UPDATE_MESSAGES"!==n.type?e:n.messages},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return"USERS_UPDATE"!==n.type?e:n.users},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return"UPDATE_CHAT"!==n.type?e:n.chat},me:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return"PROFILE_UPDATE"!==n.type?e:n.profile}}),D=Object(P.c)(w,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(h.a,{store:D},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,n,t){e.exports=t(180)},92:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){},99:function(e,n,t){}},[[87,1,2]]]);
//# sourceMappingURL=main.fe51615f.chunk.js.map